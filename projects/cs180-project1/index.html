<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Project 1: Images of the Russian Empire | Ryan Liu's Homepage </title> <meta name="author" content="Ryan Liu"> <meta name="description" content="Colorizing the Prokudin-Gorskii photo collection"> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://ryanliu30.github.io/projects/cs180-project1/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> Ryan Liu's Homepage </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications </a> </li> <li class="nav-item active"> <a class="nav-link" href="/projects/">projects <span class="sr-only">(current)</span> </a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Project 1: Images of the Russian Empire</h1> <p class="post-description">Colorizing the Prokudin-Gorskii photo collection</p> </header> <article> <h2 id="inroduction">Inroduction</h2> <p>In this project, I implemented a simple script that attempts to colorize the pictures taken by Prokudin-Gorskii as early as 1907, prior to the invention of color photography. These pictures are taken three in a group, each recorded with either a red, green or blue filter. Our goal is to recombine these pictures into one and produce a vivid color picture.</p> <h2 id="single-scale-implementation">Single Scale Implementation</h2> <p>Firstly, we need to find a plausible way of overlaying these pictures. Since these pictures are not taken digitally, they are essentially three pictures stick together. Our first step is to chuck them into three channels, R, G, and B. This can be easily done by dividing the picture evenly in vertical direction:</p> <div class="row"> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/180-project1/data/cathedral-480.webp 480w,/assets/img/180-project1/data/cathedral-800.webp 800w,/assets/img/180-project1/data/cathedral-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/180-project1/data/cathedral.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Original cathedral" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/180-project1/data/monastery-480.webp 480w,/assets/img/180-project1/data/monastery-800.webp 800w,/assets/img/180-project1/data/monastery-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/180-project1/data/monastery.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Original monastery" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/180-project1/data/tobolsk-480.webp 480w,/assets/img/180-project1/data/tobolsk-800.webp 800w,/assets/img/180-project1/data/tobolsk-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/180-project1/data/tobolsk.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Original tobolsk" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>After getting the three images, we convert them into <code class="language-plaintext highlighter-rouge">float</code> so that it is easier to process. In my algorithm, there is one parameter called <code class="language-plaintext highlighter-rouge">crop-r</code> that is core of my design. <code class="language-plaintext highlighter-rouge">crop-r</code> is the crop ratio that will be applied to the R channel, which takes the center <code class="language-plaintext highlighter-rouge">crop-r</code> portion of the image. The two other channels are aligned to the R channel.</p> <p>To align the two other channels, the signle-scale implementation applies a sliding window of the same size as the cropped R channel images to the G and B channels. The difference in size decides the size of the search gird. More formally, it will become a <code class="language-plaintext highlighter-rouge">(W * (1 - crop-r), H * (1 - crop-r))</code> grid. The crop ratio used here is <code class="language-plaintext highlighter-rouge">0.85</code> to avoid boundaries. A larger value such as <code class="language-plaintext highlighter-rouge">0.9</code> also works but would include considerably more boundary portion and damage the aesthetics of the final product. Once the grid is created, the similarity between the sliding window and the R channel is calculated as (Here, \(\mathrm{img}_1\) refers to the sliding window and the \(\mathrm{img}_2\) refers to the R channel):</p> \[\sum_{i, j} \frac{ {\mathrm{img}_{1}}_{i, j} - \mu_1}{\sigma_1} \times {\mathrm{img}_{2}}_{i, j}\] <p>In other words, we calculate the dot product between the <strong>normalized</strong> sliding window and the R channel. The idea is that we do not care about the absolute scale of different channels. The only requirement we have here is that the relatively bright/dark areas in two images must match. In fact, I tried different metrics such as cosine similarities and Frobenius distances. They did not produce as high quality image as the current version. This is because there are images that have very vibrant colors, which leads to a significant difference between channels. As a side comment, the reason why \(\mathrm{img}_2\) does not have to be normalized is because it is a constant and normalization is a global affine mapping to the similarities and won’t change the maximum.</p> <p>After that, the channels are overlaid to produce the final colored pictures:</p> <div class="row"> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/180-project1/results/cathedral-480.webp 480w,/assets/img/180-project1/results/cathedral-800.webp 800w,/assets/img/180-project1/results/cathedral-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/180-project1/results/cathedral.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Colorized cathedral" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/180-project1/results/monastery-480.webp 480w,/assets/img/180-project1/results/monastery-800.webp 800w,/assets/img/180-project1/results/monastery-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/180-project1/results/monastery.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Colorized monastery" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/180-project1/results/tobolsk-480.webp 480w,/assets/img/180-project1/results/tobolsk-800.webp 800w,/assets/img/180-project1/results/tobolsk-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/180-project1/results/tobolsk.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Colorized tobolsk" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>The offsets presented are relative to the R channel.</p> <table> <thead> <tr> <th style="text-align: center">      channel      </th> <th style="text-align: center">    cathedral    </th> <th style="text-align: center">    monastery    </th> <th style="text-align: center">      tobolsk      </th> </tr> </thead> <tbody> <tr> <td style="text-align: center">G offset</td> <td style="text-align: center">(7, 1)</td> <td style="text-align: center">(6, 1)</td> <td style="text-align: center">(4, 1)</td> </tr> <tr> <td style="text-align: center">B offset</td> <td style="text-align: center">(12, 3)</td> <td style="text-align: center">(3, 2)</td> <td style="text-align: center">(6, 3)</td> </tr> </tbody> </table> <h2 id="multi-scale-implementation">Multi-scale Implementation</h2> <p>However, as you may have noticed, this method scales as \(O(W^2H^2)\) if crop ratio is constant: one \(HW\) from the grid size, and another \(HW\) from the similarity score calculation. This is prohibitively slow. To address this issue, I implemented a multi-scale version of the aligning algorithm. The idea is very simple: we downsample the image, find the optimal offsets, and perform a fine-grained search near the optimal offsets found in downsampled version.</p> <p>To be more precise, each time, the image is downsampled by a factor of <code class="language-plaintext highlighter-rouge">scale</code>, this recursive call ends as the <code class="language-plaintext highlighter-rouge">depth</code> parameter is reached. We then perform a full grid search downsampled version (the top of the pyramid). The optimal offset is then divided by the scale to go up by one layer, and the grid of the upper layer is no longer a full search but rather a <code class="language-plaintext highlighter-rouge">scale</code> portion of the full grid centerred around the optimal offset found by the recursive call. This design keeps the grid size constant, which after experiment balance well between quality and speed. The runtime to process these pictures is about 20 seconds.</p> <div class="row"> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/180-project1/results/church-480.webp 480w,/assets/img/180-project1/results/church-800.webp 800w,/assets/img/180-project1/results/church-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/180-project1/results/church.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Colorized church" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/180-project1/results/emir-480.webp 480w,/assets/img/180-project1/results/emir-800.webp 800w,/assets/img/180-project1/results/emir-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/180-project1/results/emir.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Colorized emir" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/180-project1/results/harvesters-480.webp 480w,/assets/img/180-project1/results/harvesters-800.webp 800w,/assets/img/180-project1/results/harvesters-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/180-project1/results/harvesters.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Colorized harvesters" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="row"> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/180-project1/results/icon-480.webp 480w,/assets/img/180-project1/results/icon-800.webp 800w,/assets/img/180-project1/results/icon-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/180-project1/results/icon.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Colorized icon" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/180-project1/results/lady-480.webp 480w,/assets/img/180-project1/results/lady-800.webp 800w,/assets/img/180-project1/results/lady-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/180-project1/results/lady.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Colorized lady" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/180-project1/results/melons-480.webp 480w,/assets/img/180-project1/results/melons-800.webp 800w,/assets/img/180-project1/results/melons-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/180-project1/results/melons.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Colorized melons" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="row"> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/180-project1/results/onion_church-480.webp 480w,/assets/img/180-project1/results/onion_church-800.webp 800w,/assets/img/180-project1/results/onion_church-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/180-project1/results/onion_church.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Colorized onion_church" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/180-project1/results/sculpture-480.webp 480w,/assets/img/180-project1/results/sculpture-800.webp 800w,/assets/img/180-project1/results/sculpture-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/180-project1/results/sculpture.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Colorized sculpture" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/180-project1/results/self_portrait-480.webp 480w,/assets/img/180-project1/results/self_portrait-800.webp 800w,/assets/img/180-project1/results/self_portrait-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/180-project1/results/self_portrait.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Colorized self_portrait" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="row"> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/180-project1/results/three_generations-480.webp 480w,/assets/img/180-project1/results/three_generations-800.webp 800w,/assets/img/180-project1/results/three_generations-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/180-project1/results/three_generations.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Colorized three_generations" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/180-project1/results/train-480.webp 480w,/assets/img/180-project1/results/train-800.webp 800w,/assets/img/180-project1/results/train-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/180-project1/results/train.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Colorized train" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm"> </div> </div> <table> <thead> <tr> <th style="text-align: center">      channel      </th> <th style="text-align: center">    emir    </th> <th style="text-align: center">    church    </th> <th style="text-align: center">      icon      </th> </tr> </thead> <tbody> <tr> <td style="text-align: center">G offset</td> <td style="text-align: center">(57, 17)</td> <td style="text-align: center">(33, -8)</td> <td style="text-align: center">(48, 5)</td> </tr> <tr> <td style="text-align: center">B offset</td> <td style="text-align: center">(88, 44)</td> <td style="text-align: center">(58, -4)</td> <td style="text-align: center">(89, 23)</td> </tr> </tbody> </table> <h2 id="auto-contrast-histogram-equalization">Auto Contrast (Histogram Equalization)</h2> <p>For the Bells &amp; Whistles, I chose to implement the histogram equalization. This method attempts to enhance the contrast by making a histogram of brightness, flattening the histogram to make sure the best spread across all brightness levels. By doing so, details in the picture become more visible. Original:</p> <div class="row"> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/180-project1/results/cathedral-480.webp 480w,/assets/img/180-project1/results/cathedral-800.webp 800w,/assets/img/180-project1/results/cathedral-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/180-project1/results/cathedral.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Original cathedral" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/180-project1/results/monastery-480.webp 480w,/assets/img/180-project1/results/monastery-800.webp 800w,/assets/img/180-project1/results/monastery-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/180-project1/results/monastery.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Original monastery" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/180-project1/results/tobolsk-480.webp 480w,/assets/img/180-project1/results/tobolsk-800.webp 800w,/assets/img/180-project1/results/tobolsk-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/180-project1/results/tobolsk.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Original tobolsk" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>Contrasted:</p> <div class="row"> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/180-project1/auto-contranst-results/cathedral-480.webp 480w,/assets/img/180-project1/auto-contranst-results/cathedral-800.webp 800w,/assets/img/180-project1/auto-contranst-results/cathedral-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/180-project1/auto-contranst-results/cathedral.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Contrasted cathedral" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/180-project1/auto-contranst-results/monastery-480.webp 480w,/assets/img/180-project1/auto-contranst-results/monastery-800.webp 800w,/assets/img/180-project1/auto-contranst-results/monastery-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/180-project1/auto-contranst-results/monastery.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Contrasted monastery" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/180-project1/auto-contranst-results/tobolsk-480.webp 480w,/assets/img/180-project1/auto-contranst-results/tobolsk-800.webp 800w,/assets/img/180-project1/auto-contranst-results/tobolsk-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/180-project1/auto-contranst-results/tobolsk.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Contrasted tobolsk" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>Original:</p> <div class="row"> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/180-project1/results/church-480.webp 480w,/assets/img/180-project1/results/church-800.webp 800w,/assets/img/180-project1/results/church-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/180-project1/results/church.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Original church" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/180-project1/results/emir-480.webp 480w,/assets/img/180-project1/results/emir-800.webp 800w,/assets/img/180-project1/results/emir-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/180-project1/results/emir.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Original emir" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/180-project1/results/icon-480.webp 480w,/assets/img/180-project1/results/icon-800.webp 800w,/assets/img/180-project1/results/icon-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/180-project1/results/icon.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Original icon" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>Contrasted:</p> <div class="row"> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/180-project1/auto-contranst-results/church-480.webp 480w,/assets/img/180-project1/auto-contranst-results/church-800.webp 800w,/assets/img/180-project1/auto-contranst-results/church-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/180-project1/auto-contranst-results/church.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Contrasted church" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/180-project1/auto-contranst-results/emir-480.webp 480w,/assets/img/180-project1/auto-contranst-results/emir-800.webp 800w,/assets/img/180-project1/auto-contranst-results/emir-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/180-project1/auto-contranst-results/emir.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Contrasted emir" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/180-project1/auto-contranst-results/icon-480.webp 480w,/assets/img/180-project1/auto-contranst-results/icon-800.webp 800w,/assets/img/180-project1/auto-contranst-results/icon-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/180-project1/auto-contranst-results/icon.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Contrasted icon" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>After auto contrast, we can observe a lot more details, especially the sky. The color also becomes slightly more vivid.</p> <h2 id="auto-color-balance">Auto Color Balance</h2> <p>I also performed auto color balance through forcing the brightest pixel of each channel to be 1.</p> <p>Original:</p> <div class="row"> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/180-project1/results/cathedral-480.webp 480w,/assets/img/180-project1/results/cathedral-800.webp 800w,/assets/img/180-project1/results/cathedral-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/180-project1/results/cathedral.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Original cathedral" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/180-project1/results/monastery-480.webp 480w,/assets/img/180-project1/results/monastery-800.webp 800w,/assets/img/180-project1/results/monastery-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/180-project1/results/monastery.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Original monastery" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/180-project1/results/tobolsk-480.webp 480w,/assets/img/180-project1/results/tobolsk-800.webp 800w,/assets/img/180-project1/results/tobolsk-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/180-project1/results/tobolsk.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Original tobolsk" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>Balanced:</p> <div class="row"> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/180-project1/auto-color-balance-results/cathedral-480.webp 480w,/assets/img/180-project1/auto-color-balance-results/cathedral-800.webp 800w,/assets/img/180-project1/auto-color-balance-results/cathedral-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/180-project1/auto-color-balance-results/cathedral.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Balanced cathedral" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/180-project1/auto-color-balance-results/monastery-480.webp 480w,/assets/img/180-project1/auto-color-balance-results/monastery-800.webp 800w,/assets/img/180-project1/auto-color-balance-results/monastery-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/180-project1/auto-color-balance-results/monastery.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Balanced monastery" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/180-project1/auto-color-balance-results/tobolsk-480.webp 480w,/assets/img/180-project1/auto-color-balance-results/tobolsk-800.webp 800w,/assets/img/180-project1/auto-color-balance-results/tobolsk-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/180-project1/auto-color-balance-results/tobolsk.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Balanced tobolsk" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>Original:</p> <div class="row"> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/180-project1/results/church-480.webp 480w,/assets/img/180-project1/results/church-800.webp 800w,/assets/img/180-project1/results/church-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/180-project1/results/church.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Original church" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/180-project1/results/emir-480.webp 480w,/assets/img/180-project1/results/emir-800.webp 800w,/assets/img/180-project1/results/emir-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/180-project1/results/emir.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Original emir" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/180-project1/results/icon-480.webp 480w,/assets/img/180-project1/results/icon-800.webp 800w,/assets/img/180-project1/results/icon-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/180-project1/results/icon.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Original icon" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>Balanced:</p> <div class="row"> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/180-project1/auto-color-balance-results/church-480.webp 480w,/assets/img/180-project1/auto-color-balance-results/church-800.webp 800w,/assets/img/180-project1/auto-color-balance-results/church-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/180-project1/auto-color-balance-results/church.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Balanced church" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/180-project1/auto-color-balance-results/emir-480.webp 480w,/assets/img/180-project1/auto-color-balance-results/emir-800.webp 800w,/assets/img/180-project1/auto-color-balance-results/emir-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/180-project1/auto-color-balance-results/emir.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Balanced emir" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/180-project1/auto-color-balance-results/icon-480.webp 480w,/assets/img/180-project1/auto-color-balance-results/icon-800.webp 800w,/assets/img/180-project1/auto-color-balance-results/icon-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/180-project1/auto-color-balance-results/icon.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Balanced icon" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>Since the original picture is already pretty balanced, this does not make a big difference.</p> <h2 id="references">References</h2> <p>Wikipedia contributors. (2024, August 13). “Histogram equalization”. <em>Wikipedia</em>. https://en.wikipedia.org/wiki/Histogram_equalization</p> </article> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2024 Ryan Liu. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?06cae41083477f121be8cd9797ad8e2f"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.min.js" integrity="sha256-rjmgmaB99riUNcdlrDtcAiwtLIojSxNyUFdl+Qh+rB4=" crossorigin="anonymous"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>addBackToTop();</script> <script type="module" src="/assets/js/search/ninja-keys.min.js?601a2d3465e2a52bec38b600518d5f70"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script>let searchTheme=determineComputedTheme();const ninjaKeys=document.querySelector("ninja-keys");"dark"===searchTheme?ninjaKeys.classList.add("dark"):ninjaKeys.classList.remove("dark");const openSearchModal=()=>{const e=$("#navbarNav");e.hasClass("show")&&e.collapse("hide"),ninjaKeys.open()};</script> <script>const ninja=document.querySelector("ninja-keys");ninja.data=[{id:"nav-about",title:"about",section:"Navigation",handler:()=>{window.location.href="/"}},{id:"nav-publications",title:"publications",description:"publications by categories in reversed chronological order. generated by jekyll-scholar.",section:"Navigation",handler:()=>{window.location.href="/publications/"}},{id:"nav-projects",title:"projects",description:"Some cool projects did in class",section:"Navigation",handler:()=>{window.location.href="/projects/"}},{id:"nav-repositories",title:"repositories",description:"Selected Github repositories",section:"Navigation",handler:()=>{window.location.href="/repositories/"}},{id:"nav-cv",title:"cv",description:"This is a description of the page. You can modify it in '_pages/cv.md'. You can also change or remove the top pdf download button.",section:"Navigation",handler:()=>{window.location.href="/cv/"}},{id:"post-google-gemini-updates-flash-1-5-gemma-2-and-project-astra",title:"Google Gemini updates: Flash 1.5, Gemma 2 and Project Astra",description:"We\u2019re sharing updates across our Gemini family of models and a glimpse of Project Astra, our vision for the future of AI assistants.",section:"Posts",handler:()=>{window.open("https://blog.google/technology/ai/google-gemini-update-flash-ai-assistant-io-2024/","_blank")}},{id:"post-displaying-external-posts-on-your-al-folio-blog",title:"Displaying External Posts on Your al-folio Blog",description:"",section:"Posts",handler:()=>{window.open("https://medium.com/@al-folio/displaying-external-posts-on-your-al-folio-blog-b60a1d241a0a?source=rss-17feae71c3c4------2","_blank")}},{id:"news-a-simple-inline-announcement-with-markdown-emoji-sparkles-smile",title:'A simple inline announcement with Markdown emoji! <img class="emoji" title=":sparkles:" alt=":sparkles:" src="https://github.githubassets.com/images/icons/emoji/unicode/2728.png" height="20" width="20"> <img class="emoji" title=":smile:" alt=":smile:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png" height="20" width="20">',description:"",section:"News"},{id:"news-a-long-announcement-with-details",title:"A long announcement with details",description:"",section:"News",handler:()=>{window.location.href="/news/announcement_2/"}},{id:"news-a-simple-inline-announcement",title:"A simple inline announcement.",description:"",section:"News"},{id:"projects-project-1-images-of-the-russian-empire",title:"Project 1: Images of the Russian Empire",description:"Colorizing the Prokudin-Gorskii photo collection",section:"Projects",handler:()=>{window.location.href="/projects/cs180-project1/"}},{id:"socials-email",title:"Send email",section:"Socials",handler:()=>{window.open("mailto:%6C%69%75%72%79%61%6E%33%30@%62%65%72%6B%65%6C%65%79.%65%64%75","_blank")}},{id:"socials-google-scholar",title:"Google Scholar",section:"Socials",handler:()=>{window.open("https://scholar.google.com/citations?user=SB_HWdIAAAAJ","_blank")}},{id:"socials-github",title:"GitHub",section:"Socials",handler:()=>{window.open("https://github.com/ryanliu30","_blank")}},{id:"socials-linkedin",title:"LinkedIn",section:"Socials",handler:()=>{window.open("https://www.linkedin.com/in/ryan-liu-4785441bb","_blank")}},{id:"socials-rss",title:"RSS Feed",section:"Socials",handler:()=>{window.open("/feed.xml","_blank")}},{id:"light-theme",title:"Change theme to light",description:"Change the theme of the site to Light",section:"Theme",handler:()=>{setThemeSetting("light")}},{id:"dark-theme",title:"Change theme to dark",description:"Change the theme of the site to Dark",section:"Theme",handler:()=>{setThemeSetting("dark")}},{id:"system-theme",title:"Use system default theme",description:"Change the theme of the site to System Default",section:"Theme",handler:()=>{setThemeSetting("system")}}];</script> <script src="/assets/js/shortcut-key.js"></script> </body> </html>